# Listing of Parameters
# ---------------------
# Number of dimensions
set dimension = 2

set run_type = flow_simulation
set pde_type  = navier_stokes

set conv_num_flux = roe
set diss_num_flux = symm_internal_penalty

# DG related parameters
# set overintegration = 0
set use_weak_form = true
# set flux_nodes_type = GL

subsection euler
  set reference_length = 1.0
  set mach_infinity = 0.5
  set angle_of_attack = 0.0
end

subsection navier_stokes
  set reynolds_number_inf                 = 5000.0
  set prandtl_number                      = 0.72
  set temperature_inf                     = 300.00
  set nondimensionalized_isothermal_wall_temperature = 1.0
  set thermal_boundary_condition_type = isothermal
  set use_constant_viscosity = true
  set nondimensionalized_constant_viscosity = 1.0
end

subsection ODE solver
  set output_solution_every_x_steps = 1

  # Maximum nonlinear solver iterations
  set nonlinear_max_iterations            = 100

  # Nonlinear solver residual tolerance
  set nonlinear_steady_residual_tolerance = 1e-11

  set initial_time_step = 0.1
  set time_step_factor_residual = 1.0
  set time_step_factor_residual_exp = 1.0

  # Print every print_iteration_modulo iterations of the nonlinear solver
  # set print_iteration_modulo              = 1

  # Explicit or implicit solverChoices are <explicit|implicit>.
  set ode_solver_type                         = implicit
end

subsection linear solver
#set linear_solver_type = direct
#set linear_solver_output = verbose
  subsection gmres options
    # Factor by which the diagonal of the matrix will be scaled, which
    # sometimes can help to get better preconditioners
    set ilut_atol                 = 1e-4

    # Amount of an absolute perturbation that will be added to the diagonal of
    # the matrix, which sometimes can help to get better preconditioners
    set ilut_rtol                 = 1.00001

    # relative size of elements which should be dropped when forming an
    # incomplete lu decomposition with threshold
    set ilut_drop                 = 0.0
    # Amount of additional fill-in elements besides the sparse matrix
    # structure
    set ilut_fill                 =  2

    # Linear residual tolerance for convergence of the linear system
    set linear_residual_tolerance = 1e-10

    # Maximum number of iterations for linear solver
    set max_iterations            = 2000

    # Number of iterations before restarting GMRES
    set restart_number            = 300

  end 
end


subsection flow_solver
  set flow_case_type = airfoil_2D
  set steady_state = true
  set poly_degree = 0
  # set constant_time_step = 2E-4  
  # set final_time = 4
  # set do_compute_unsteady_data_and_write_to_table = true
  # set unsteady_data_table_filename = NACA0012_Dealii
  subsection grid
	# set input_mesh_filename = ../../../meshes/naca0012_hopw_ref0
    subsection airfoil_2D
      set airfoil_length = 1.0
      set height = 5.0
      set length_b2 = 10.0
      set incline_factor = 0.1
      set bias_factor = 3.0
      set refinements = 0
      set n_subdivision_x_0 = 50
      set n_subdivision_x_1 = 40
      set n_subdivision_x_2 = 50
      set n_subdivision_y = 5
      set airfoil_sampling_factor = 1
    end
  end
end
