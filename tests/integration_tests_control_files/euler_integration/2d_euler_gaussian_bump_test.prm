# Listing of Parameters
# ---------------------

set dimension = 2
set run_type = flow_simulation
set pde_type = euler

set conv_num_flux = roe

subsection euler
  set reference_length = 1.0
  set mach_infinity = 0.5
  set angle_of_attack = 0.0
end

subsection linear solver
#set linear_solver_type = direct
  subsection gmres options
    set linear_residual_tolerance = 1e-8
    set max_iterations = 2000
    set restart_number = 100
    set ilut_fill = 1
    # set ilut_drop = 1e-4
  end 
end

subsection mesh adaptation
    set total_mesh_adaptation_cycles = 4
    set use_goal_oriented_mesh_adaptation = true
    set mesh_adaptation_type = h_adaptation
    subsection fixed-fraction
      set refine_fraction = 0.05
      set h_coarsen_fraction = 0.025
    end
end

subsection functional
  # functional choice
  set functional_type = total_pressure_loss
end
subsection linear solver
#set linear_solver_type = direct
  subsection gmres options
    set linear_residual_tolerance = 1e-8
    set max_iterations = 2000
    set restart_number = 100
    set ilut_fill = 5
    set ilut_atol = 1.0e-5
    set ilut_rtol = 0.0
    # set ilut_drop = 1e-4
    end 
end


#subsection artificial dissipation
#	set add_artificial_dissipation = false
#	set artificial_dissipation_type = enthalpy_conserving_laplacian
#	set artificial_dissipation_test_type = discontinuity_sensor_activation
#	set use_enthalpy_error = true
#	set mu_artificial_dissipation = 1.0
#	set kappa_artificial_dissipation = 0.5
#endsubdivided_hyper_rectangle

subsection ODE solver
  set output_solution_every_x_steps = 1
  # Maximum nonlinear solver iterations
  set nonlinear_max_iterations            = 500

  # Nonlinear solver residual tolerance
  set nonlinear_steady_residual_tolerance = 1e-11

  set initial_time_step = 50
  set time_step_factor_residual = 25.0
  set time_step_factor_residual_exp = 4.0

  # Print every print_iteration_modulo iterations of the nonlinear solver
  set print_iteration_modulo              = 1

  # Explicit or implicit solverChoices are <explicit|implicit>.
  set ode_solver_type  = implicit

  set output_solution_every_x_steps = 1
end

subsection flow_solver
  set flow_case_type = gaussian_bump
  set poly_degree = 1
  set max_poly_degree_for_adaptation = 2
  set steady_state = true
  set steady_state_polynomial_ramping = true
  subsection grid
    set grid_degree = 2
    subsection gaussian_bump
      set number_of_subdivisions_in_x_direction = 60
      set number_of_subdivisions_in_y_direction = 5
      set bump_height = 0.0625
      # set channel_height = 0.5
      # set channel_length = 4
    end
  end

end
